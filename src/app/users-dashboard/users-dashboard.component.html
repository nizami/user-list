<form class="header" [formGroup]="searchForm">
  <input type="text" formControlName="search" />

  <div class="divider"></div>

  <button
    [class.active]="currentViewState === ViewState.List"
    (click)="setViewState(ViewState.List)"
  >
    List
  </button>
  <button
    [class.active]="currentViewState === ViewState.Cards"
    (click)="setViewState(ViewState.Cards)"
  >
    Cards
  </button>
</form>

<div class="main">
  @if (loading) {
    <h2>Loading</h2>
  }
  @else {
    @if (response; as response) {
      @if (response.items.length > 0) {
        @switch (currentViewState) {
          @case (ViewState.List) {
            <app-users-list-view [users]="response.items" (remove)="onRemove($event)"></app-users-list-view>
          }
          @case (ViewState.Cards) {
            <app-users-cards-view [users]="response.items" (remove)="onRemove($event)"></app-users-cards-view>
          }
        }
      }
      @else {
        <h2>Nothing found</h2>
      }
    }
  }
</div>


@if (!loading && allPageNumbers.length > 0) {
  <div class="footer">
    <span>Found {{response?.items?.length}}</span>

    <div class="divider"></div>

    <span>Pages:</span>
    <div>
      @for (item of allPageNumbers; track $index) {
        <button [class.active]="currentPageNumber === item" (click)="setPageNumber(item)">{{item}}</button>
      }
    </div>

    <span>Items per page:</span>
    <div>
      @for (item of allItemsPerPage; track $index) {
        <button [class.active]="currentItemsPerPage === item" (click)="setItemsPerPage(item)">{{item}}</button>
      }
    </div>
  </div>
}